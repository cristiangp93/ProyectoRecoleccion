<div class="header bg-gradient-primary py-7 py-lg-8">
  <div class="container">
    <div class="header-body text-center mb-7">
      <div class="row justify-content-center">
        <div class="col-lg-5 col-md-6">
          <h1 class="text-white">Bienvenido</h1>
          <p class="text-lead text-light">Sistema de control de recolecci贸n</p>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Page content -->
<div class="container mt--8 pb-5">
  <div class="row justify-content-center">
    <div class="col-lg-12 col-md-12">
      <div class="card bg-secondary shadow border-0">
        <div class="card-body px-lg-5 py-lg-5">
          <form autocomplete="off" [formGroup]="sectorForm">
            <div class="form-group">
              <h4><strong>Seleccione su sector</strong></h4>
              <span *ngIf="locationAccepted">
                <i class="fa fa-map-pin text-success"></i>
                Ubicaci贸n {{locationAccepted ? 'permitida' : 'no permitida'}}
              </span>
              <div *ngIf="locationAccepted">
                <select class="custom-select"
                        id="inputGroupSelect04"
                        (change)="setSelected()"
                        name="sector"
                        [title]="locationAccepted? '': 'Debe permitir el acceso a la ubicaci贸n'"
                        formControlName="sector"
                        required>
                  <option value="">--- Sectores ---</option>
                  <option *ngFor="let sector of _rSvES.routesSectorVehicleEmployee" [ngValue]="sector">
                    {{sector.sectorRoute.sector.des}} ({{sector.sectorRoute.sector.name}})
                  </option>
                </select>
              </div>
            </div>
          </form>
          <agm-map *ngIf="selectedSector" [latitude]="lat"
                   [longitude]="lng"
                   [zoom]="16">
            <agm-polyline [editable]="false"
                          strokeColor="yellow"
                          strokeWeight="8"
                          [polylineDraggable]="false">
              <agm-polyline-point *ngFor="let map of selectedSector.sectorRoute.route.gps"
                                  [latitude]="map.lat"
                                  [longitude]="map.lng">
              </agm-polyline-point>
            </agm-polyline>
            <!--<agm-marker *ngFor="let map of selectedSector.sectorRoute.route.gps"
                        [latitude]="map.lat"
                        [longitude]="map.lng">
            </agm-marker>-->
            <agm-marker [latitude]="lat"
                        [longitude]="lng"
                        [iconUrl]="icon">
              <agm-info-window [disableAutoPan]="false"
                               [latitude]="lat"
                               [longitude]="lng">
                <h3>Posici贸n actual</h3>
                <p><strong>Latitud: </strong>{{lat}}</p>
                <p><strong>Longitud: </strong>{{lng}}</p>
              </agm-info-window>
            </agm-marker>
          </agm-map>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  agm-map {
    height: 500px;
  }
</style>
